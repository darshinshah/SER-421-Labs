var RelatedPageRecommendationsClickback;(function(){function y(){var s,l,a,v,y,b,c;try{if(s=null,typeof rprData!="undefined"&&rprData)s=rprData.InsertId,o=rprData.IsInstrumentation;else{n(t,i,"RenderDataNotAvailable");return}if(l=ft()&&ot(),a=ut(u),typeof _w!="undefined"&&l&&(v=sessionStorage.getItem(r),v&&st()&&(f.lastLinkClicked=v,h(s,f),n(t,i,"QuickbackTriggered")),sessionStorage.removeItem(r)),typeof _w!="undefined"&&a&&sj_be(_d,u.visibilityChangedEventName,function(){return w(s,f)}),l||a)for(y=_ge(e).children,b=function(n){var t=y.item(n),i;k(t)&&(i=it(t),i&&sj_be(t,"click",function(n){return!p(n)&&g(f,i)}))},c=0;c<y.length;c++)b(c);else n(t,i,"NoClickbackTriggerSupported")}catch(d){n(t,i,d?d.message:"Unknown Error")}}function p(n){var t,i;if(n===null||n===void 0?void 0:n.currentTarget)for(t=n.target;t&&t!==n.currentTarget;){for(i=0;i<s.length;i++)if(Lib.CssClass.contains(t,s[i]))return!0;t=t.parentElement}return!1}function w(f,e){try{var s=_d[u.hiddenProperty];e.lastLinkClicked&&(s?(n(t,i,"NewTabLoadTriggered"),h(f,e)):(n(t,i,"RevisitTriggered"),c(e),sessionStorage.removeItem(r)))}catch(o){n(t,i,o?o.message:"Unknown Error")}}function h(r,u){var h,l,a,o=u.lastLinkClicked,s,v,e,f,y;if(!((h=o===null||o===void 0?void 0:o.trim())===null||h===void 0?void 0:h.length)){n(t,i,"EmptyUrlDetected");return}if(s=nt(),!((l=s===null||s===void 0?void 0:s.trim())===null||l===void 0?void 0:l.length)){n(t,i,"EmptyQueryDetected");return}if(v=b(),!v){n(t,i,"CouldNotGetContainerWidth");return}(e=u.linkStates[o]=(a=u.linkStates[o])!==null&&a!==void 0?a:{state:0,recommendationsHtml:undefined},e.state===0)&&(e.state=1,f=sj_gx(),f.onreadystatechange=function(){try{f.readyState===4&&f.status===200?(e.state=2,e.recommendationsHtml=f.responseText,c(u)):f.readyState===4&&f.status===204?(e.state=2,n(t,i,"AsyncNoContent")):(e.state=3,n(t,i,"AsyncLoadError - Status: "+f.status+" "+f.statusText))}catch(r){n(t,i,r?r.message:"Unknown Error")}},f.open("POST","/relatedPageRecommendations?IID="+r+"&IG="+_G.IG,!0),f.setRequestHeader("content-type","application/json"),f.timeout=1e4,y={url:o,query:s,containerWidth:v},f.send(JSON.stringify(y)))}function b(){var o,s,h,u=_ge(e),f=u.getElementsByClassName("b_algo"),r;return f.length>0?(r=_w.getComputedStyle(f[0]),((o=f[0])===null||o===void 0?void 0:o.clientWidth)&&(r===null||r===void 0?void 0:r.paddingLeft)&&(r===null||r===void 0?void 0:r.paddingRight)?f[0].clientWidth-parseInt(r.paddingLeft)-parseInt(r.paddingRight):(n(t,i,"Unable to get the container width. Fall back to the width of #b_results"),(h=(s=f[0])===null||s===void 0?void 0:s.clientWidth)!==null&&h!==void 0?h:u===null||u===void 0?void 0:u.clientWidth)):(n(t,i,"No b_algo results. Fall back to the width of #b_results"),u===null||u===void 0?void 0:u.clientWidth)}function c(r){var u,h,f,s;if(!d(r))return!1;u=r.lastLinkClicked;h=r.linkStates[u];r.lastLinkClicked=undefined;var a=_ge(e),v=a.children,c=-1;for(f=0;f<a.children.length;f++)if(s=l(v[f]),(u===null||u===void 0?void 0:u.length)&&(s===null||s===void 0?void 0:s.getAttribute("href"))===u){c=f;break}return c!==-1?(o?n(t,"ClickbackAddedInst",""):(sj_appHTML(v[c],h.recommendationsHtml),n(t,"ClickbackAdded","")),n(t,i,"InsertedRecommendations"),h.recommendationsHtml=undefined,typeof rms=="undefined"||o||rms.start(),!0):!1}function k(n){var t;return((t=n===null||n===void 0?void 0:n.className)===null||t===void 0?void 0:t.indexOf(a))>=0&&n.getElementsByClassName(v).length===0}function d(n){var t=n.linkStates[n.lastLinkClicked];return!_d[u.hiddenProperty]&&Boolean(t===null||t===void 0?void 0:t.recommendationsHtml)&&t.state===2}function g(n,t){(t===null||t===void 0?void 0:t.length)&&!n.linkStates[t]?(n.lastLinkClicked=t,et(r,n.lastLinkClicked)||(n.lastLinkClicked=undefined)):n.lastLinkClicked=undefined}function nt(){var n,t,i=(t=(n=_w.location)===null||n===void 0?void 0:n.search)===null||t===void 0?void 0:t.match(new RegExp("[?&]{1}q=([^&]+)"));return i?decodeURI(i[1]):null}function tt(n){return!!n.match(/^http[s]?:\/\/.+|^www\..+/)}function it(n){var t=l(n);return t&&(t===null||t===void 0?void 0:t.hasAttribute("href"))&&tt(t.getAttribute("href"))?t.getAttribute("href"):null}function l(n){for(var t,i=0;i<n.children.length;i++)for(t=n.children.item(i);t;){if(t.nodeName=="A")return t;t=t.firstElementChild}return null}function rt(){var i=undefined,r=undefined,t,n;if("hidden"in _d)i="hidden",r="visibilitychange";else for(t=["webkit","moz","ms","o"],n=0;n<t.length;n++)if(t[n]+"Hidden"in _d){i=t[n]+"Hidden";r=t[n]+"visibilitychange";break}return{hiddenProperty:i,visibilityChangedEventName:r}}function ut(n){return!!(n&&n.hiddenProperty&&n.visibilityChangedEventName)}function ft(){if(typeof Storage=="undefined"||typeof sessionStorage=="undefined")return!1;try{sessionStorage.setItem(r+"Test","test");sessionStorage.removeItem(r+"Test")}catch(n){return!1}return!0}function et(n,t){try{sessionStorage.setItem(n,t)}catch(i){return!1}return!0}function ot(){var t,n,i,r;return!!(((t=_w===null||_w===void 0?void 0:_w.performance)===null||t===void 0?void 0:t.navigation)||((r=(i=(n=_w===null||_w===void 0?void 0:_w.performance)===null||n===void 0?void 0:n.getEntriesByType)===null||i===void 0?void 0:i.call(n,"navigation"))===null||r===void 0?void 0:r.length)>0)}function st(){var n,t,i,r,u;return"performance"in _w&&(((r=(i=(t=(n=_w.performance)===null||n===void 0?void 0:n.getEntriesByType)===null||t===void 0?void 0:t.call(n,"navigation"))===null||i===void 0?void 0:i[0])===null||r===void 0?void 0:r.type)==="back_forward"||((u=_w.performance.navigation)===null||u===void 0?void 0:u.type)&&_w.performance.navigation.type===_w.performance.navigation.TYPE_BACK_FORWARD)}var n=function(n,t,i){_w.sj_log&&sj_log(n,t,i)},r="qbClickedIdx",t="RPR.CB",i="ClickbackLog",e="b_results",a="b_algo",v="scs_child_rpr",s=["scs_exp"],o=!1,u=rt(),f={lastLinkClicked:undefined,linkStates:{}};y();_w.sj_evt&&sj_evt.fire("rpr_cb_load_init")})(RelatedPageRecommendationsClickback||(RelatedPageRecommendationsClickback={}))